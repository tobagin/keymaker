using Gtk 4.0;
using Adw 1;

template $KeyMakerSSHAgentDialog : Adw.Dialog {
  title: _("SSH Agent Manager");
  content-width: 800;
  content-height: 600;

  child: Adw.ToolbarView {
    top-bar-style: raised;

    [top]
    Adw.HeaderBar header_bar {
      [title]
      Label {
        label: _("SSH Agent Manager");
        styles ["heading"]
      }

    }

    content: Stack main_stack {
      Adw.StatusPage status_page {
        name: "status_page";
        title: _("Loading...");
        description: _("Checking SSH agent status");
        icon-name: "view-refresh-symbolic";
      }

      ScrolledWindow keys_scrolled_window {
        name: "keys_page";
        
        Adw.Clamp {
          maximum-size: 800;
          tightening-threshold: 400;
          
          Box {
            orientation: vertical;
            spacing: 24;
            margin-top: 24;
            margin-bottom: 24;
            margin-start: 12;
            margin-end: 12;
            
            Adw.PreferencesGroup {
              title: _("Keys Loaded in Agent");
              description: _("These keys are currently available for SSH authentication");
              
              header-suffix: Box {
                spacing: 6;
                
                Button add_key_button {
                  icon-name: "tab-new-symbolic";
                  tooltip-text: _("Add Key to Agent");
                  sensitive: false;
                  styles ["flat"]
                  valign: center;
                }
                
                Button refresh_button {
                  icon-name: "view-refresh-symbolic";
                  tooltip-text: _("Refresh Agent Keys");
                  styles ["flat"]
                  valign: center;
                }
                
                Button remove_all_button {
                  icon-name: "edit-clear-all-symbolic";
                  tooltip-text: _("Remove All Keys");
                  sensitive: false;
                  styles ["flat", "destructive-action"]
                  valign: center;
                }
              };
              
              ListBox agent_keys_list {
                selection-mode: none;
                styles ["boxed-list"]
              }
            }
          }
        }
      }
    };
  };
}
